{% extends "base.html" %}
{% block title %}Quiz Results â€“ Language App{% endblock %}

{% block content %}
<div class="container--narrow">

  <a href="/feed" class="back-link">â† Back to feed</a>

  <!-- Result hero -->
  <div class="card" style="margin-bottom:20px;overflow:hidden;">
    <div class="result-hero">
      {% if content %}
      <p style="font-size:0.875rem;color:var(--text-subtle);margin-bottom:8px;">{{ content.title }}</p>
      {% endif %}

      <div class="result-score">{{ attempt.score_percent }}%</div>
      <div class="result-fraction">{{ attempt.correct_count }} / {{ attempt.total_questions }} correct</div>

      {% if attempt.xp_awarded > 0 %}
        <div class="result-xp">âš¡ +{{ attempt.xp_awarded }} XP earned</div>
      {% else %}
        <div class="result-xp" style="background:var(--bg-card);border-color:var(--border);color:var(--text-subtle);">
          0 XP (already earned today)
        </div>
      {% endif %}
    </div>

    <div class="card-footer">
      <table class="meta-table">
        {% if streak %}
        <tr>
          <th>ğŸ”¥ Streak</th>
          <td>
            <strong style="color:var(--accent);">{{ streak.current_streak_days }} day{{ 's' if streak.current_streak_days != 1 else '' }}</strong>
            {% if streak.last_active_date_utc %}
              <span style="color:var(--text-subtle);font-size:0.8125rem;margin-left:6px;">last active: {{ streak.last_active_date_utc }}</span>
            {% endif %}
          </td>
        </tr>
        {% endif %}
        <tr>
          <th>Completed</th>
          <td>{{ attempt.completed_at.strftime('%Y-%m-%d %H:%M') }} UTC</td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Actions -->
  <div class="actions">
    {% if content %}
    <a href="/content/{{ content.id }}/quiz" class="btn btn-ghost">Retake quiz</a>
    {% endif %}
    <a href="/progress" class="btn btn-ghost">View progress</a>
    <a href="/feed" class="btn btn-primary">Next lesson â†’</a>
  </div>

</div>
{% endblock %}
